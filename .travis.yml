sudo: false
language: ruby
rvm: 2.3.8

addons:
  postgresql: 9.6

cache:
  bundler: true

before_script:
  - bundle exec rake db:create db:setup RAILS_ENV=test

script:
  - bundle exec rake spec
  - bundle exec rubocop -R
  - gem install bundler-audit brakeman
  - bundle audit check --update
  - brakeman -A -z --ensure-latest -x UnscopedFind,ForgerySetting --skip-files app/lib/hash_util.rb
